function MouseEvent(a){this.x=a.pageX,this.y=a.pageY}!function(a){a.fn.imagezoom=function(b){function f(){a(e).attr("alt",d),a(document.body).unbind("mousemove"),a("div.zoomMask").remove(),a("div.zoomDiv").remove()}var c={xzoom:400,yzoom:400,offset:10,position:"BTR",preload:1,zoomValue:2};b&&a.extend(c,b);var d="",e=this;a(this).bind("mouseenter",function(b){var e=a(this).offset().left,g=a(this).offset().top,h=a(this).get(0).offsetWidth,i=a(this).get(0).offsetHeight,j=a(this).parent().offset().left,k=a(this).parent().offset().top,l=a(this).parent().width();a(this).parent().height();d=a(this).attr("alt");var n=a(this).attr("rel");a(this).attr("alt",""),0==a("div.zoomDiv").get().length&&a(document.body).append("<div class='zoomDiv'><img class='bigimg' src='"+n+"'/></div><div class='zoomMask'>&nbsp;</div>"),"BTR"==c.position?j+l+c.offset+c.xzoom>screen.width?leftpos=j-c.offset-c.xzoom:leftpos=j+l+c.offset:(leftpos=e-c.xzoom-c.offset,leftpos<0&&(leftpos=e+h+c.offset)),a("div.zoomDiv").css({top:k,left:leftpos}),a("div.zoomDiv").width(c.xzoom),a("div.zoomDiv").height(c.yzoom),a("div.zoomDiv").show(),a(this).css("cursor","crosshair"),a(document.body).mousemove(function(b){if(mouse=new MouseEvent(b),mouse.x<e||mouse.x>e+h||mouse.y<g||mouse.y>g+i)return void f();var d=a(".bigimg").get(0).offsetWidth,j=a(".bigimg").get(0).offsetHeight,k="x",l="y";if(isNaN(l)|isNaN(k)){var l=d/h,k=j/i;a("div.zoomMask").width(c.xzoom/l),a("div.zoomMask").height(c.yzoom/k),a("div.zoomMask").css("visibility","visible")}xpos=mouse.x-a("div.zoomMask").width()/c.zoomValue,ypos=mouse.y-a("div.zoomMask").height()/c.zoomValue,xposs=mouse.x-a("div.zoomMask").width()/c.zoomValue-e,yposs=mouse.y-a("div.zoomMask").height()/c.zoomValue-g,xpos=mouse.x-a("div.zoomMask").width()/c.zoomValue<e?e:mouse.x+a("div.zoomMask").width()/c.zoomValue>h+e?h+e-a("div.zoomMask").width():xpos,ypos=mouse.y-a("div.zoomMask").height()/c.zoomValue<g?g:mouse.y+a("div.zoomMask").height()/c.zoomValue>i+g?i+g-a("div.zoomMask").height():ypos,a("div.zoomMask").css({top:ypos,left:xpos}),a("div.zoomDiv").get(0).scrollLeft=xposs*l,a("div.zoomDiv").get(0).scrollTop=yposs*k})}),count=0,c.preload&&(a("body").append("<div style='display:none;' class='jqPreload"+count+"'></div>"),a(this).each(function(){var b=a(this).attr("rel"),c=jQuery("div.jqPreload"+count).html();jQuery("div.jqPreload"+count).html(c+'<img src="'+b+'">')}))}}(jQuery);
