!function($){if(!dateFormat||"function"!=typeof dateFormat)var dateFormat=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),w:"0123456".indexOf(this.getDay()),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};if(!DateAdd||"function"!=typeof DateDiff)var DateAdd=function(interval,number,idate){number=parseInt(number);var date;switch("string"==typeof idate&&(date=idate.split(/\D/),eval("var date = new Date("+date.join(",")+")")),"object"==typeof idate&&(date=new Date(idate.toString())),interval){case"y":date.setFullYear(date.getFullYear()+number);break;case"m":date.setMonth(date.getMonth()+number);break;case"d":date.setDate(date.getDate()+number);break;case"w":date.setDate(date.getDate()+7*number);break;case"h":date.setHours(date.getHours()+number);break;case"n":date.setMinutes(date.getMinutes()+number);break;case"s":date.setSeconds(date.getSeconds()+number);break;case"l":date.setMilliseconds(date.getMilliseconds()+number)}return date};if(!DateDiff||"function"!=typeof DateDiff)var DateDiff=function(a,b,c){switch(a){case"d":case"w":b=new Date(b.getFullYear(),b.getMonth(),b.getDate()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate());break;case"h":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours());break;case"n":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes());break;case"s":b=new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()),c=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}var d=b.getTime(),e=c.getTime(),f=NaN;switch(a){case"y":f=c.getFullYear()-b.getFullYear();break;case"m":f=12*(c.getFullYear()-b.getFullYear())+c.getMonth()-b.getMonth();break;case"d":f=Math.floor(e/864e5)-Math.floor(d/864e5);break;case"w":f=Math.floor((e+3456e5)/6048e5)-Math.floor((d+3456e5)/6048e5);break;case"h":f=Math.floor(e/36e5)-Math.floor(d/36e5);break;case"n":f=Math.floor(e/6e4)-Math.floor(d/6e4);break;case"s":f=Math.floor(e/1e3)-Math.floor(d/1e3);break;case"l":f=e-d}return f};var userAgent=window.navigator.userAgent.toLowerCase();$.browser.msie8=$.browser.msie&&/msie 8\.0/i.test(userAgent),$.browser.msie7=$.browser.msie&&/msie 7\.0/i.test(userAgent),$.browser.msie6=!$.browser.msie8&&!$.browser.msie7&&$.browser.msie&&/msie 6\.0/i.test(userAgent),void 0==$.fn.noSelect&&($.fn.noSelect=function(a){return null==a?prevent=!0:prevent=a,prevent?this.each(function(){$.browser.msie||$.browser.safari?$(this).bind("selectstart",function(){return!1}):$.browser.mozilla?($(this).css("MozUserSelect","none"),$("body").trigger("focus")):$.browser.opera?$(this).bind("mousedown",function(){return!1}):$(this).attr("unselectable","on")}):this.each(function(){$.browser.msie||$.browser.safari?$(this).unbind("selectstart"):$.browser.mozilla?$(this).css("MozUserSelect","inherit"):$.browser.opera?$(this).unbind("mousedown"):$(this).removeAttr("unselectable","on")})}),$.fn.datepicker=function(a){function h(){c.click(s),$("#BBIT_DP_INNER tbody").click(r),$("#BBIT_DP_LEFTBTN").click(u),$("#BBIT_DP_RIGHTBTN").click(v),$("#BBIT-DP-MP").click(o).dblclick(n),$("#BBIT-DP-MP-PREV").click(k),$("#BBIT-DP-MP-NEXT").click(l),$("#BBIT-DP-MP-OKBTN").click(j),$("#BBIT-DP-MP-CANCELBTN").click(i)}function i(){return $("#BBIT-DP-MP").animate({top:-193},{duration:200,complete:function(){$("#BBIT-DP-MP").hide()}}),!1}function j(){return b.Year=b.cy,b.Month=b.cm+1,b.Day=1,$("#BBIT-DP-MP").animate({top:-193},{duration:200,complete:function(){$("#BBIT-DP-MP").hide()}}),y(),!1}function k(){var a=b.ty-10;return b.ty=a,m(a),!1}function l(){var a=b.ty+10;return b.ty=a,m(a),!1}function m(a){for(var c=a-4,d=[],e=0;5>e;e++)d.push(c+e),d.push(c+e+5);$("#BBIT-DP-MP td.bbit-dp-mp-year").each(function(a){b.Year==d[a]?$(this).addClass("bbit-dp-mp-sel"):$(this).removeClass("bbit-dp-mp-sel"),$(this).html("<a href='javascript:void(0);'>"+d[a]+"</a>").attr("xyear",d[a])})}function n(a){var b=a.target||a.srcElement,c=q(b);return null==c?!1:(($(c).hasClass("bbit-dp-mp-month")||$(c).hasClass("bbit-dp-mp-year"))&&j(a),!1)}function o(a){var c=$(this),d=a.target||a.srcElement,e=q(d);if(null==e)return!1;if($(e).hasClass("bbit-dp-mp-month")&&!$(e).hasClass("bbit-dp-mp-sel")){var f=c.find("td.bbit-dp-mp-month.bbit-dp-mp-sel");f.length>0&&f.removeClass("bbit-dp-mp-sel"),$(e).addClass("bbit-dp-mp-sel"),b.cm=parseInt($(e).attr("xmonth"))}if($(e).hasClass("bbit-dp-mp-year")&&!$(e).hasClass("bbit-dp-mp-sel")){var f=c.find("td.bbit-dp-mp-year.bbit-dp-mp-sel");f.length>0&&f.removeClass("bbit-dp-mp-sel"),$(e).addClass("bbit-dp-mp-sel"),b.cy=parseInt($(e).attr("xyear"))}return!1}function q(a){if("TD"==a.tagName.toUpperCase())return a;if("BODY"==a.tagName.toUpperCase())return null;var b=$(a).parent();return b.length>0?"TD"!=b[0].tagName.toUpperCase()?q(b[0]):b[0]:null}function r(a){var b=a.target||a.srcElement,d=q(b);if(null==d)return!1;var e=$(d);if(!$(d).hasClass("bbit-dp-disabled")){var f=e.attr("xdate");c.data("indata",t(f)),x()}return!1}function s(){return!1}function t(a){try{var b=a.split("-"),c=parseInt(b[0]),d=parseInt(b[1])-1,e=parseInt(b[2]);return new Date(c,d,e)}catch(f){return null}}function u(){return 1==b.Month?(b.Year--,b.Month=12):b.Month--,y(),!1}function v(){return 12==b.Month?(b.Year++,b.Month=1):b.Month++,y(),!1}function x(){var a=c.data("ctarget"),d=c.data("cpk"),e=c.data("onReturn"),f=c.data("indata"),g=c.data("ads"),h=c.data("ade"),i=!1;g&&g>f&&(i=!0),h&&f>h&&(i=!0),i||(e&&jQuery.isFunction(e)?e.call(a[0],dateFormat.call(c.data("indata"),"yyyy-MM-dd")):a&&a.val(dateFormat.call(c.data("indata"),"yyyy-MM-dd")),d.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata").removeData("onReturn").removeData("ads").removeData("ade"),c.css("visibility","hidden"),a=d=null,b.callback())}function y(){var a=$("#BBIT_DP_INNER tbody");$("#BBIT_DP_YMBTN").html(b.Year+"\u5e74"+b.Month+"\u6708");var d=new Date(b.Year,b.Month-1,1),e=b.weekStart-d.getDay(),f=b.Month-1;e>0&&(e-=7);for(var g=DateAdd("d",e,d),i=(DateAdd("d",42,g),c.data("ads")),j=c.data("ade"),k=[],l=dateFormat.call(b.today,"yyyy-MM-dd"),m=c.data("indata"),n=null!=m?dateFormat.call(m,"yyyy-MM-dd"):"",o=1;42>=o;o++){o%7==1&&k.push("<tr>");var p=DateAdd("d",o-1,g),q=[],r=!1;i&&i>p&&(r=!0),j&&p>j&&(r=!0),p.getMonth()<f?q.push("bbit-dp-prevday"):p.getMonth()>f&&q.push("bbit-dp-nextday"),r?q.push("bbit-dp-disabled"):q.push("bbit-dp-active");var s=dateFormat.call(p,"yyyy-MM-dd");s==l&&q.push("bbit-dp-today"),s==n&&q.push("bbit-dp-selected"),k.push("<td class='",q.join(" "),"' title='",dateFormat.call(p,"yyyy-MM-dd"),"' xdate='",dateFormat.call(p,"yyyy-MM-dd"),"'><a href='javascript:void(0);'><em><span>",p.getDate(),"</span></em></a></td>"),o%7==0&&k.push("</tr>")}a.html(k.join(""))}var b={weekStart:0,weekName:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],monthName:["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"],monthp:"\u6708",Year:(new Date).getFullYear(),Month:(new Date).getMonth()+1,Day:(new Date).getDate(),today:new Date,btnOk:" \u786e\u5b9a ",btnCancel:" \u53d6\u6d88 ",btnToday:" \u4eca\u5929 ",inputDate:null,onReturn:!1,version:"1.1",applyrule:!1,showtarget:null,picker:"",event:"hover",callback:function(){}};$.extend(b,a);var c=$("#BBIT_DP_CONTAINER");if(0==c.length){var d=[];d.push("<div id='BBIT_DP_CONTAINER' class='bbit-dp' style='width:175px;z-index:999;'>"),$.browser.msie6&&d.push('<iframe style="position:absolute;z-index:-1;width:100%;height:205px;top:0;left:0;scrolling:no;" frameborder="0" src="about:blank"></iframe>'),d.push("<table class='dp-maintable' cellspacing='0' cellpadding='0' style='width:175px;'><tbody><tr><td>"),d.push("<table class='bbit-dp-top' cellspacing='0'><tr><td class='bbit-dp-top-left'> <a id='BBIT_DP_LEFTBTN' href='javascript:void(0);' title='","\u4e0a\u4e00\u6708","' class='vvicon'>&#xe611;</a></td><td class='bbit-dp-top-center' align='center'><em><button id='BBIT_DP_YMBTN'></button></em></td><td class='bbit-dp-top-right'><a id='BBIT_DP_RIGHTBTN' href='javascript:void(0);' title='","\u4e0b\u4e00\u6708","' class='vvicon'>&#xe60f;</a></td></tr></table>"),d.push("</td></tr>"),d.push("<tr><td>"),d.push("<table id='BBIT_DP_INNER' class='bbit-dp-inner' cellspacing='0'><thead><tr>");for(var e=b.weekStart,f=0;7>f;f++)d.push("<th><span>",b.weekName[e],"</span></th>"),6==e?e=0:e++;d.push("</tr></thead>"),d.push("<tbody></tbody></table>"),d.push("</td></tr>"),d.push("</tbody></table>"),d.push("<div id='BBIT-DP-MP' class='bbit-dp-mp'  style='z-index:auto;'><table id='BBIT-DP-T' style='width: 175px; height: 193px' border='0' cellspacing='0'><tbody>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='0'><a href='javascript:void(0);'>",b.monthName[0],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='6'><a href='javascript:void(0);'>",b.monthName[6],"</a></td><td class='bbit-dp-mp-ybtn' align='middle'><a id='BBIT-DP-MP-PREV' class='bbit-dp-mp-prev'></a></td><td class='bbit-dp-mp-ybtn' align='middle'><a id='BBIT-DP-MP-NEXT' class='bbit-dp-mp-next'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='1'><a href='javascript:void(0);'>",b.monthName[1],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='7'><a href='javascript:void(0);'>",b.monthName[7],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='2'><a href='javascript:void(0);'>",b.monthName[2],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='8'><a href='javascript:void(0);'>",b.monthName[8],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='3'><a href='javascript:void(0);'>",b.monthName[3],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='9'><a href='javascript:void(0);'>",b.monthName[9],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='4'><a href='javascript:void(0);'>",b.monthName[4],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='10'><a href='javascript:void(0);'>",b.monthName[10],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr>"),d.push("<td class='bbit-dp-mp-month' xmonth='5'><a href='javascript:void(0);'>",b.monthName[5],"</a></td><td class='bbit-dp-mp-month bbit-dp-mp-sep' xmonth='11'><a href='javascript:void(0);'>",b.monthName[11],"</a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td><td class='bbit-dp-mp-year'><a href='javascript:void(0);'></a></td>"),d.push("</tr>"),d.push("<tr class='bbit-dp-mp-btns'>"),d.push("<td colspan='4'><button id='BBIT-DP-MP-OKBTN' class='bbit-dp-mp-ok'>",b.btnOk,"</button><button id='BBIT-DP-MP-CANCELBTN' class='bbit-dp-mp-cancel'>",b.btnCancel,"</button></td>"),d.push("</tr>"),d.push("</tbody></table>"),d.push("</div>"),d.push("</div>");var g=d.join("");"hover"==b.event?$("#datetime").append(g):$(document.body).append(g),c=$("#BBIT_DP_CONTAINER"),h()}return $(this).each(function(){var a=$(this).addClass("bbit-dp-input"),d=$(b.picker),e=b.event;"hover"!=e&&null==b.showtarget&&a.after(d),d.on(e,function(d){var f=$(this).attr("isshow"),g=$(this);if("visible"==c.css("visibility")&&c.css(" visibility","hidden"),"1"==f)return g.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata").removeData("onReturn"),!1;var h=a.val();if("hover"==e&&(h=a.data("cdata")),""!=h&&(h=t(h)),null==h||""==h?(b.Year=(new Date).getFullYear(),b.Month=(new Date).getMonth()+1,b.Day=(new Date).getDate(),b.inputDate=null):(b.Year=h.getFullYear(),b.Month=h.getMonth()+1,b.Day=h.getDate(),b.inputDate=h),c.data("ctarget",a).data("cpk",g).data("indata",b.inputDate).data("onReturn",b.onReturn),b.applyrule&&$.isFunction(b.applyrule)){var i=b.applyrule.call(a,a[0].id);i&&(i.startdate?c.data("ads",i.startdate):c.removeData("ads"),i.enddate?c.data("ade",i.enddate):c.removeData("ade"))}else c.removeData("ads").removeData("ade");y(),$("#BBIT-DP-T").height(c.height());var j=b.showtarget||a,k=j.offset(),l=j.outerHeight(),m={left:k.left,top:k.top+l};"hover"==e&&(m={left:-1,top:l});var n=c.width(),o=c.height(),p=document.documentElement.clientWidth,q=document.documentElement.clientHeight;return m.left+n>=p&&(m.left=p-n-2),m.top+o>=q&&(m.top=k.top-o-2),m.left<("hover"==e?-1:0)&&(m.left=10),m.top<0&&(m.top=10),$("#BBIT-DP-MP").hide(),m.visibility="visible",c.css(m),"hover"==e?$(this).attr("isshow","1"):$(document).one("click",function(a){g.attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata"),c.css("visibility","hidden")}),!1}),"hover"==e&&d.mouseleave(function(a){$(this).attr("isshow","0"),c.removeData("ctarget").removeData("cpk").removeData("indata"),c.css("visibility","hidden")})})}}(jQuery);
