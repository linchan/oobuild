define(["avalon"],function(a){var b=!1,d=function(c){if(!c.prototype.__eventmixed)if(c.prototype.__eventmixed=!0,c.prototype.addEventListener=function(a,b,c){this.listeners||(this.listeners={}),this.listeners.hasOwnProperty(a)||(this.listeners[a]=[]),this.listeners[a].push({scope:c,fn:b})},c.prototype.dispatchEvent=function(a){if(this.listeners){var b=this.listeners,c=Array.prototype.slice.apply(arguments,[1]);if(b.hasOwnProperty(a)){var d=b[a],e=!0;return d.forEach(function(a){var b=a.fn.apply(a.scope,c);"boolean"==typeof b&&(e=e&&b)}),e}}},c.prototype.removeEventListener=function(a,b,c){if(this.listeners&&this.listeners.hasOwnProperty(a)){var d=this.listeners[a],e=[];d.forEach(function(a){a.scope==c&&a.fn==b&&e.push(a)}),e.forEach(function(a){d.remove(a)})}},c.prototype.log=function(){this.jsDebuggerOn&&a.log.apply(a,Array.prototype.slice.call(arguments,0))},c.prototype.jsDebuggerOn=b,c.prototype.flashDebuggerOn=b,c.prototype.hasOwnProperty("purge")){var d=c.prototype.purge;c.prototype.purge=function(){d.call(this),delete this.listeners}}else c.prototype.purge=function(){delete this.listeners}};return d});